- type: Tag
  id: CarpetAbyss

- type: entity
  id: CarpetAbyss
  name: бездна (фальшивая)
  description: Иногда ковер начинает всматриваться в вас...
  parent: CarpetBase
  suffix: Андромеда
  components:
  - type: Clickable
  - type: IconSmooth
    key: full
    base: chasm
  - type: Sprite
    sprite: Andromeda/Evil/floor/basalt_carpet.rsi
  - type: Icon
    sprite: Andromeda/Evil/floor/basalt_carpet.rsi
  - type: Destructible
    thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 100
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
      - trigger:
          !type:DamageTrigger
          damage: 10
        behaviors:
          - !type:DoActsBehavior
            acts: [ "Destruction" ]
          - !type:SpawnEntitiesBehavior
            spawn:
              FloorCarpetItemAbyss:
                min: 1
                max: 1

- type: stack
  id: FloorCarpetAbyss
  name: бездонный стак
  spawn: FloorCarpetItemAbyss
  maxCount: 10
  itemSize: 5                

- type: entity
  name: бездонный ковер (10)
  parent: FloorCarpetItemAbyss
  id: FloorCarpetItemAbyss10
  components:
  - type: Stack
    count: 10

- type: entity
  name: бездонный ковер
  description: Иногда ковер начинает всматриваться в вас...
  parent: FloorTileItemBase
  id: FloorCarpetItemAbyss
  suffix: Андромеда
  components:
  - type: Sprite
    sprite: Andromeda/Evil/floor/basalt_carpet_small.rsi
    state: small
  - type: Item
    sprite: Andromeda/Evil/floor/basalt_carpet_small.rsi
    size: Normal
  - type: FloorTile
    outputs:
      - Plating
  - type: Stack
    stackType: FloorCarpetAbyss
  - type: Tag
    tags:
    - CarpetAbyss
  - type: SpawnAfterInteract
    prototype: CarpetAbyss
    doAfter: 0.5
    removeOnInteract: true


# - type: entity
#   id: CarpetBase
#   parent: BaseStructure
#   name: carpet
#   description: "Fancy walking surface."
#   abstract: true
#   components:
#   - type: Sprite
#     drawdepth: FloorTiles
#   - type: Icon
#     state: full
#   - type: IconSmooth
#     key: full
#     base: carpet_
#   - type: Tag
#     tags: [ Carpet ]
#   - type: Physics
#     canCollide: false
#   - type: Fixtures
#   - type: Damageable
#     damageContainer: Inorganic
#   - type: Destructible
#     thresholds:
#       - trigger:
#           !type:DamageTrigger
#           damage: 10
#         behaviors:
#           - !type:DoActsBehavior
#             acts: [ "Destruction" ]
#   - type: Butcherable
#     butcheringType: Knife
#     butcherDelay: 2
#     spawned:
#     - id: MaterialCloth1
#       amount: 1


# - type: entity
#   id: CarpetBlack
#   parent: CarpetBase
#   suffix: Black
#   components:
#   - type: Clickable
#   - type: Sprite
#     sprite: Structures/Furniture/Carpets/black_carpet.rsi
#   - type: Icon
#     sprite: Structures/Furniture/Carpets/black_carpet.rsi
#   - type: Destructible
#     thresholds:
#       - trigger:
#           !type:DamageTrigger
#           damage: 100
#         behaviors: #excess damage (nuke?). avoid computational cost of spawning entities.
#         - !type:DoActsBehavior
#           acts: [ "Destruction" ]
#       - trigger:
#           !type:DamageTrigger
#           damage: 10
#         behaviors:
#           - !type:DoActsBehavior
#             acts: [ "Destruction" ]
#           - !type:SpawnEntitiesBehavior
#             spawn:
#               FloorCarpetItemBlack:
#                 min: 1
#                 max: 1

# - type: entity
#   parent: FloorCarpetItemRed
#   id: FloorCarpetItemBlack
#   suffix: Black
#   components:
#   - type: Sprite
#     state: carpet-black
#   - type: Item
#     heldPrefix: carpet-black
#   - type: Stack
#     stackType: FloorCarpetBlack
#   - type: Tag
#     tags:
#     - CarpetBlack
#   - type: SpawnAfterInteract #Nuke after convert to FloorTile
#     prototype: CarpetBlack
#     doAfter: 0.5
#     removeOnInteract: true




# - type: entity
#   name: бездонный ковер (10)
#   parent: FloorTileItemAbyssChasm
#   id: FloorTileItemAbyssChasm10
#   components:
#   - type: Stack
#     count: 10

# - type: tile
#   id: AbyssChasm
#   name: плитка бездны
#   sprite: /Textures/Andromeda/Evil/chasms/abyss_chasm.rsi/full.png
#   baseTurf: Plating
#   isSubfloor: false
#   deconstructTools: [ Prying ]
#   footstepSounds:
#     collection: FootstepTile
#   itemDrop: FloorTileItemAbyssChasm
#   heatCapacity: 10000

# - type: stack
#   id: FloorTileStackAbyssChasm
#   name: плитка бездны
#   spawn: FloorTileItemAbyssChasm
#   maxCount: 10
#   itemSize: 5

# - type: entity
#   name: плитка бездны
#   suffix: Андромеда
#   parent: FloorTileItemBase
#   description: Иногда плитка начинает всматриваться в вас...
#   id: FloorTileItemAbyssChasm
#   components:
#   - type: Sprite
#     sprite: Andromeda/Evil/chasms/abyss_chasm.rsi
#     state: small
#   - type: Item
#     sprite: Andromeda/Evil/chasms/abyss_chasm.rsi
#     size: Normal
#   - type: FloorTile
#     outputs:
#       - Plating
#       - AbyssChasm


# - type: entity
#   name: плитка бездны (10)
#   parent: FloorTileItemAbyssChasm
#   id: FloorTileItemAbyssChasm10
#   components:
#   - type: Stack
#     count: 10